<%- include('./partials/head') %>

<%- include('./partials/navigation', {current: '/lessons'}); %>

<main class="playlist-details">

    <div class="playlist-head">

        <img class="playlist-bg" src="/assets/playlist-detail-bg.svg" alt="">

        <a href="/lessons" aria-label="go back">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M16.3357 5.10128C16.7796 5.54525 16.7796 6.26506 16.3357 6.70902L11.0764 11.9683L16.3357 17.2276C16.7796 17.6716 16.7796 18.3914 16.3357 18.8353C15.8917 19.2793 15.1719 19.2793 14.7279 18.8353L8.66476 12.7722C8.2208 12.3282 8.2208 11.6084 8.66476 11.1644L14.7279 5.10128C15.1719 4.65732 15.8917 4.65732 16.3357 5.10128Z" fill="white"/>
            </svg>
        </a>
        <a href="#" aria-label="options">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 13C4.61929 13 3.5 14.1193 3.5 15.5C3.5 16.8807 4.61929 18 6 18C7.38071 18 8.5 16.8807 8.5 15.5C8.5 14.1193 7.38071 13 6 13Z" fill="black"/>
                <path d="M13.5 15.5C13.5 14.1193 14.6193 13 16 13C17.3807 13 18.5 14.1193 18.5 15.5C18.5 16.8807 17.3807 18 16 18C14.6193 18 13.5 16.8807 13.5 15.5Z" fill="black"/>
                <path d="M23.5 15.5C23.5 14.1193 24.6193 13 26 13C27.3807 13 28.5 14.1193 28.5 15.5C28.5 16.8807 27.3807 18 26 18C24.6193 18 23.5 16.8807 23.5 15.5Z" fill="black"/>
            </svg>
        </a>

    </div>

    <section class="playlist-info">
        <% playlists.forEach(playlist => { %>
            <h2><%- playlist.title %></h2>
            <p><%- playlist.description %></p>
        <% }) %>

        <div class="detailed-info">
            <div>
                <img src="/assets/profile-pic.svg" alt="">
                <p>Made by <strong>Tom</strong></p>
            </div>
            <div>
                <img src="/assets/Clock.svg" alt="">
                <p>2u 11m</p>
            </div>
        </div>

        <div class="button-container">
            <div>
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.6875 11.1094H12.6914C14.1416 11.1094 15.3281 10.5501 15.3281 9.11602C15.3281 7.6819 13.9307 7.17882 12.7969 7.12266C12.5625 4.87986 10.9248 3.51562 9 3.51562C7.18066 3.51562 6.00891 4.72298 5.625 5.92031C4.04297 6.07061 2.67188 6.86637 2.67188 8.51484C2.67188 10.1633 4.0957 11.1094 5.83594 11.1094H7.3125" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M7.3125 12.7994L9 14.4843L10.6875 12.7994" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 8.15625V14.0633" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.6536 7.15238C11.8471 7.33832 12.1529 7.33832 12.3464 7.15238C13.1829 6.34871 14.326 5.75 15.6 5.75C18.1489 5.75 20.25 7.64769 20.25 10.0298C20.25 11.7261 19.4577 13.1809 18.348 14.428C17.2397 15.6736 15.7972 16.7316 14.4588 17.6376L12.1401 19.207C12.0555 19.2643 11.9445 19.2643 11.8599 19.207L9.54125 17.6376C8.20278 16.7316 6.76035 15.6736 5.65201 14.428C4.54225 13.1809 3.75 11.7261 3.75 10.0298C3.75 7.64769 5.85106 5.75 8.4 5.75C9.67403 5.75 10.8171 6.34871 11.6536 7.15238Z" stroke="#C4C4C4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="12" fill="#F3A22A"/>
                <rect width="16.8" height="16.8" transform="translate(3.59961 3.6001)" fill="#F3A22A"/>
                <path d="M17.0874 13.0614C17.7817 12.5242 17.7817 11.476 17.0874 10.9387C14.9891 9.31514 12.6461 8.03543 10.146 7.14749L9.68929 6.98528C8.8155 6.67494 7.89254 7.26613 7.77425 8.16812C7.44374 10.6883 7.44374 13.3119 7.77425 15.832C7.89254 16.734 8.8155 17.3252 9.68929 17.0148L10.146 16.8526C12.6461 15.9647 14.9891 14.685 17.0874 13.0614Z" fill="white"/>
            </svg>
        </div>

    </section>

    <section class="stories">
        <% playlists.forEach(playlist => { %>
          <% if (playlist.stories && playlist.stories.length > 0) { %> <!-- Check if the playlist has associated stories -->
            <ul class="stories-content">
              <% playlist.stories.forEach(storyId => { %> <!-- Iterate over each story ID associated with the playlist -->
                <% const story = stories.find(story => story.id === storyId); %> <!-- Find the corresponding story object from the stories array using the story ID --> 
                <% if (story) { %> <!-- If a story with the given ID is found, render the below -->
                  <li class="story">
                    <img src="https://fdnd-agency.directus.app/assets/<%= story.image %>" alt="story" onerror="this.onerror=null;this.src='images/sixoclock.png';">
                    <div class="story-content">
                        <div class="story-title">
                            <h3><%- story.title %></h3>
                            <img src="/assets/united-kingdom-flag.svg" alt="language flag">
                        </div>
                        <p><%= story.summary.substring(0, 70) %>...</p>
                            <div class="story-footer">
                                <div class="audio-container">
                                    <a href="/story:id" aria-label="play">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="9" cy="9" r="9" fill="#3A54DE"/>
                                            <path d="M12.8158 9.79593C13.3366 9.39301 13.3365 8.60684 12.8158 8.20391C11.2421 6.98623 9.48482 6.02645 7.60976 5.3605L7.26721 5.23884C6.61187 5.00608 5.91965 5.44948 5.83093 6.12596C5.58305 8.01608 5.58305 9.98377 5.83093 11.8739C5.91965 12.5504 6.61187 12.9938 7.26721 12.761L7.60976 12.6393C9.48482 11.9734 11.2421 11.0136 12.8158 9.79593Z" fill="white"/>
                                        </svg>                               
                                    </a>
                                    <p>31 min. 55sec</p>
                                </div>
                                <div class="download-add">
                                    <button title="download">
                                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M10.6875 11.1094H12.6914C14.1416 11.1094 15.3281 10.5501 15.3281 9.11602C15.3281 7.6819 13.9307 7.17882 12.7969 7.12266C12.5625 4.87986 10.9248 3.51562 9 3.51562C7.18066 3.51562 6.00891 4.72298 5.625 5.92031C4.04297 6.07061 2.67188 6.86637 2.67188 8.51484C2.67188 10.1633 4.0957 11.1094 5.83594 11.1094H7.3125" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M7.3125 12.7994L9 14.4843L10.6875 12.7994" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M9 8.15625V14.0633" stroke="#B0B0B0" stroke-width="0.84375" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>                            
                                    </button>
                                    <button title="add to playlist">
                                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="6" cy="6" r="5.5" stroke="#B0B0B0"/>
                                            <rect x="6.42871" y="3" width="6" height="0.857143" rx="0.428571" transform="rotate(90 6.42871 3)" fill="#B0B0B0"/>
                                            <rect x="3" y="5.57141" width="6" height="0.857143" rx="0.428571" fill="#B0B0B0"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                    </div>
                  </li>
                <% } %>
              <% }); %>
            </ul>
          <% } else { %>
            <p>No stories available.</p> <!-- If no stories are associated with the playlist -->
          <% } %>
        <% }); %>
      </section>

</main>


<%- include('./partials/foot') %>